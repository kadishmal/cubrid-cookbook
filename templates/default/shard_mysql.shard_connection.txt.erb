#
# Cookbook Name:: cubrid
# Templates:: shard_connection.txt
#
# shard-id	real-db-name	connection-info
#				* cubrid : hostname, hostname, ...
# 				* mysql  : hostname:port
#				* oracle : tns

# cubrid
#0		shard1		host1
#1		shard1		host2
#2		shard1		host3
#3		shard1		host4

# mysql
#0		shard_1		host1:3300
#1		shard_2		host2:3300

<% node['cubrid']['shard_hosts'].each_with_index do |host_list, index| -%>
<%= "#{index}\t\t#{node['cubrid']['shard_db']}\t\t#{host_list.keys[0]}:#{node['mysql']['port']}" %>
<% end -%>

# oracle
#0		shard_1		(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = host1)(PORT = 1521)))
#1		shard_2		(DESCRIPTION = (ADDRESS = (PROTOCOL = TCP)(HOST = host2)(PORT = 1521)))
